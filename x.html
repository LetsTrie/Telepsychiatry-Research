<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.4.1.js"
      integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
  </head>
  <body>
    <div class="wrapper">
      <div class="chambers">
        <div class="oneChamber">
          <div class="chamber_name_place">
            <input type="text" name="chamberName" />
            <input type="text" name="chamberPlace" />
            <button class="minusChamber">minusChamber</button>
          </div>
          <div class="chamber_day_time">
            <div class="eachDayTime">
              <input type="text" name="dayFrom" />
              <input type="text" name="dayTo" />
              <input type="text" name="timeFrom" />
              <input type="text" name="timeTo" />
              <button class="minusDayTime">minusDayTime</button>
            </div>
          </div>
          <button class="plusDayTime">Plus Day Time</button>
        </div>
      </div>
      <button class="addChamber">Plus chamber</button>
      <button id="submitForm">submit</button>
    </div>

    <script>
      $(document).on('click', '.minusChamber', e => {
        const len =
          e.target.parentElement.parentElement.parentElement.children.length;
        if (len !== 1) {
          $(e.target.parentElement.parentElement).remove();
        }
      });
      $(document).on('click', '.minusDayTime', e => {
        const len = e.target.parentElement.parentElement.children.length;
        console.log(len);
        if (len !== 1) {
          $(e.target.parentElement).remove();
        }
      });
      $(document).on('click', '.plusDayTime', e => {
        $(e.target.parentElement.children[1]).append(`
        <div class="eachDayTime">
            <input type="text" name="dayFrom" />
            <input type="text" name="dayTo" />
            <input type="text" name="timeFrom" />
            <input type="text" name="timeTo" />
            <button class="minusDayTime">minusDayTime</button>
          </div>`);
      });
      $('.addChamber').on('click', e => {
        $('.chambers').append(`<div class="oneChamber">
        <div class="chamber_name_place">
          <input type="text" name="chamberName" />
          <input type="text" name="chamberPlace" />
          <button class="minusChamber">minusChamber</button>
        </div>
        <div class="chamber_day_time">
          <div class="eachDayTime">
            <input type="text" name="dayFrom" />
            <input type="text" name="dayTo" />
            <input type="text" name="timeFrom" />
            <input type="text" name="timeTo" />
            <button class="minusDayTime">minusDayTime</button>
          </div>
        </div>
        <button class="plusDayTime">Plus Day Time</button>
      </div>`);
      });
    </script>

    <script>
      document.getElementById('submitForm').addEventListener('click', e => {
        const eachChambers = e.target.parentElement.children[0].children;
        const data = [];
        for (let i = 0; i < eachChambers.length; i++) {
          const placeTimes = eachChambers[i].children;
          const chamberName = $(placeTimes[0].children[0])[0].value;
          const chamberLocation = $(placeTimes[0].children[1])[0].value;
          const eachDayTime = placeTimes[1].children;
          let locationNtimes = [];
          for (let i = 0; i < eachDayTime.length; i++) {
            const dayFrom = $(eachDayTime[i].children[0])[0].value;
            const dayTo = $(eachDayTime[i].children[1])[0].value;
            const timeFrom = $(eachDayTime[i].children[2])[0].value;
            const timeTo = $(eachDayTime[i].children[3])[0].value;
            locationNtimes.push({ dayFrom, dayTo, timeFrom, timeTo });
          }
          data.push({ chamberName, chamberLocation, locationNtimes });
        }
        console.log(data);
      });
    </script>
  </body>
</html>
